# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ Service Worker

## üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:

### 1. **–ü–æ–º–∏–ª–∫–∞ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è Response**
```
Uncaught (in promise) TypeError: Failed to execute 'clone' on 'Response': Response body is already used
```

**‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É `networkResponse.bodyUsed` –ø–µ—Ä–µ–¥ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è–º
- –¢–µ–ø–µ—Ä Service Worker –Ω–µ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∫–ª–æ–Ω—É–≤–∞—Ç–∏ –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ Response

### 2. **–ü–æ–º–∏–ª–∫–∞ –∑ —ñ–∫–æ–Ω–∫–∞–º–∏ –º–∞–Ω—ñ—Ñ–µ—Å—Ç—É**
```
Error while trying to use the following icon from the Manifest: http://localhost:8080/images/screenshot-desktop.png
```

**‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –û–Ω–æ–≤–ª–µ–Ω–æ –≤–µ—Ä—Å—ñ—é –º–∞–Ω—ñ—Ñ–µ—Å—Ç—É –¥–æ 1.0.1
- –û–Ω–æ–≤–ª–µ–Ω–æ –≤–µ—Ä—Å—ñ—é Service Worker –¥–æ v1.0.1
- –î–æ–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É –º–∞–Ω—ñ—Ñ–µ—Å—Ç—É

## üöÄ –Ø–∫ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
1. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É (`Ctrl+F5` –∞–±–æ `Cmd+Shift+R`)
2. Service Worker –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è –¥–æ –Ω–æ–≤–æ—ó –≤–µ—Ä—Å—ñ—ó
3. –ö–µ—à—ñ –±—É–¥—É—Ç—å –æ—á–∏—â–µ–Ω—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –†—É—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ DevTools (`F12`)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É `Application`
3. –í —Ä–æ–∑–¥—ñ–ª—ñ `Storage` –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å `Clear storage`
4. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å
```javascript
// –û—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫–µ—à—ñ–≤ Service Worker
caches.keys().then(names => {
    names.forEach(name => caches.delete(name));
});

// –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Service Worker
navigator.serviceWorker.getRegistrations().then(registrations => {
    registrations.forEach(registration => registration.unregister());
});

// –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É
location.reload();
```

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å:

### –í –∫–æ–Ω—Å–æ–ª—ñ –ø–æ–≤–∏–Ω–Ω–æ –∑'—è–≤–∏—Ç–∏—Å—è:
```
[SW Manager] –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è Service Worker...
[SW Manager] Service Worker –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π: /
[App] Service Worker —É—Å–ø—ñ—à–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π
üîç –ó–∞–ø—É—Å–∫ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ Service Worker...
üìã –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞:
  ‚úÖ Service Worker
  ‚úÖ Cache API
  ‚úÖ Fetch API
  ‚úÖ Promise
  ‚úÖ Async/Await
üìù –ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ Service Workers: 1
üíæ –ö–µ—à—ñ: 2
üì± PWA –ú–∞–Ω—ñ—Ñ–µ—Å—Ç:
  –ù–∞–∑–≤–∞: Photo Sorter WASM
  –ö–æ—Ä–æ—Ç–∫–∞ –Ω–∞–∑–≤–∞: Photo Sorter
  –Ü–∫–æ–Ω–∫–∏: 4
  –°–∫—Ä—ñ–Ω—à–æ—Ç–∏: 0
‚úÖ –í—Å—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ!
```

### –í Application –≤–∫–ª–∞–¥—Ü—ñ:
- **Service Workers**: –°—Ç–∞—Ç—É—Å "Activated and is running"
- **Cache Storage**: 2 –∫–µ—à—ñ (static —Ç–∞ dynamic)
- **Manifest**: –í–∞–ª—ñ–¥–Ω–∏–π –º–∞–Ω—ñ—Ñ–µ—Å—Ç –±–µ–∑ –ø–æ–º–∏–ª–æ–∫

## ‚ö†Ô∏è –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è:

1. **–ü–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –±—Ä–∞—É–∑–µ—Ä–∞:**
   - `Ctrl+Shift+Delete` (Chrome/Edge)
   - `Cmd+Shift+Delete` (Safari)
   - –û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à —Ç–∞ cookies

2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ HTTPS:**
   - Service Worker –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ HTTPS –∞–±–æ localhost
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `http://localhost:8080`

3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –±—Ä–∞—É–∑–µ—Ä:**
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Å—É—á–∞—Å–Ω–∏–π –±—Ä–∞—É–∑–µ—Ä (Chrome 60+, Firefox 55+, Edge 79+)
   - Safari –º–∞—î –æ–±–º–µ–∂–µ–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É Service Worker

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å:

- ‚úÖ **–ü–æ–º–∏–ª–∫–∏ –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è Response –∑–Ω–∏–∫–ª–∏**
- ‚úÖ **–ü–æ–º–∏–ª–∫–∏ –∑ —ñ–∫–æ–Ω–∫–∞–º–∏ –º–∞–Ω—ñ—Ñ–µ—Å—Ç—É –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ**
- ‚úÖ **Service Worker –ø—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω–æ**
- ‚úÖ **–ö–µ—à—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ**
- ‚úÖ **PWA –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ**
- ‚úÖ **–û—Ñ–ª–∞–π–Ω —Ä–æ–±–æ—Ç–∞ –∞–∫—Ç–∏–≤–Ω–∞**

–¢–µ–ø–µ—Ä –≤–∞—à –¥–æ–¥–∞—Ç–æ–∫ –ø–æ–≤–∏–Ω–µ–Ω –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –±–µ–∑ –ø–æ–º–∏–ª–æ–∫! üöÄ
